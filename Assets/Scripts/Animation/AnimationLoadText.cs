using System.Collections;
using System.Collections.Generic;
using TMPro;
using UnityEngine;

public class AnimationLoadText : MonoBehaviour
{
    public TextMeshProUGUI textComponent; // ?????? ?? ????????? ??????
    public string[] textArray; // ?????? ???????
    public string[] textArrayEn;
    private string[] textArrayForType;
    public float typingSpeed = 0.05f; // ???????? ??????
    public float delayBetweenTexts = 2.0f; // ???????? ????? ????????

    private bool isTyping = false; // ????, ???????????, ???? ?? ??????? ??????
    private int currentTextIndex = -1; // ?????? ???????? ??????

    private void Start()
    {
        // ??????? ???????? ????????
        if (LangAsset.CurrentLangLocation == LangLocation.En)
            textArrayForType = textArrayEn;
        else
            textArrayForType = textArray;
        TypeRandomText();
    }



    private void TypeRandomText()
    {
        
            int randomIndex;
            do
            {
                randomIndex = Random.Range(0, textArrayForType.Length);
            } while (randomIndex == currentTextIndex); // ?????????, ??? ????? ????? ?? ????????? ? ??????????

            currentTextIndex = randomIndex;

            // ??????? ?????? ?????????? ??????
            StartCoroutine(TypeText(textArrayForType[currentTextIndex]));
        
    }

    IEnumerator TypeText(string text)
    {
        isTyping = true;
        textComponent.text = "";

        for (int charIndex = 0; charIndex < text.Length; charIndex++)
        {
            textComponent.text += text[charIndex];
            yield return new WaitForSeconds(typingSpeed);
        }

        isTyping = false;
    }
}
